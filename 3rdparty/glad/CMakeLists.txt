include(GNUInstallDirs)

file(GLOB HEADER_FILES LIST_DIRECTORIES false src/include/*.h)

if (EMSCRIPTEN)
  set(SOURCE_FILES src/gles2.c)
else ()
  set(SOURCE_FILES src/gl.c)
endif ()

add_library(glad STATIC EXCLUDE_FROM_ALL ${SOURCE_FILES})

target_include_directories(glad PUBLIC include)

install(TARGETS glad
        BUNDLE DESTINATION ${CMAKE_INSTALL_BINDIR}
        RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR}
        LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
        ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
        FRAMEWORK DESTINATION ${CMAKE_INSTALL_LIBDIR}
        INCLUDES DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})

install(FILES ${HEADER_FILES} DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})
